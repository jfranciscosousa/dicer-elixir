#!/usr/bin/env sh

set -e
. "./bin/functions"

env=${1:-"dev"}

if [ -z "$(ls -A .secrets)" ]; then
  pp_info "setup" "Initialising submodule..."
  git submodule update --init --recursive
fi

pp_info "setup" "Setting up env..."
git submodule update --recursive --remote

if [ -f .env ]; then
  printf "env file updated.\n"
else
  ln -s .secrets/$env .env
  printf "env file created.\n"
fi
